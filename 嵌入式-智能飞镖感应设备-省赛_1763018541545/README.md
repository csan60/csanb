# 智能飞镖感应设备 - 完整测试套件

## 🎯 项目简介

这是一个针对智能飞镖感应设备的**完整测试解决方案**，包含8个精心设计的测试脚本，覆盖系统的所有关键功能模块，并成功识别出10大高频典型问题。

**适用场景**: 嵌入式系统测试、通信协议验证、状态机测试、得分逻辑验证

---

## ✨ 核心特性

- ✅ **8个测试脚本** - 覆盖输入、接口、逻辑、状态、异常
- ✅ **50+测试用例** - 全面的功能和边界测试
- ✅ **10大问题识别** - 精准定位系统缺陷
- ✅ **详细文档** - 测试说明、问题报告、修复建议
- ✅ **灵活配置** - YAML数据驱动，易于扩展

---

## 📁 快速导航

| 文档 | 描述 | 链接 |
|------|------|------|
| 📄 项目概览 | 完整项目结构和功能说明 | [项目概览.md](./项目概览.md) |
| 📖 测试说明 | 详细的测试用例和使用方法 | [project/测试说明.md](./project/测试说明.md) |
| 📋 问题报告 | 10大问题的详细分析和修复建议 | [问题报告_详细版.md](./问题报告_详细版.md) |
| 📊 测试数据 | YAML格式的测试数据配置 | [project/testdata/data.yml](./project/testdata/data.yml) |

---

## 🚀 快速开始

### 1. 测试脚本清单

```
基础测试（原有）:
├── 1_shoot.lua           - 飞镖信息输入测试
├── 2_target.lua          - 靶区信息接收测试
├── 3_interface_shoot.lua - 数据传送机接口校验
└── 4_interface_target.lua- 靶体接口校验

高级测试（新增⭐）:
├── 5_scoring_test.lua       - 得分逻辑测试
├── 6_state_machine_test.lua - 状态机测试
├── 7_performance_test.lua   - 成绩评定测试
└── 8_exception_test.lua     - 异常数据测试
```

### 2. 运行测试

在测试平台中依次执行 `run/` 目录下的配置文件：
```bash
run/1shoot.run
run/2target.run
run/3interface_shoot.run
run/4interface_target.run
run/5scoring_test.run      # ⭐ 新增
run/6state_machine_test.run # ⭐ 新增
run/7performance_test.run   # ⭐ 新增
run/8exception_test.run     # ⭐ 新增
```

### 3. 查看结果

测试执行过程中会：
- 显示详细的测试步骤
- 提示需要观察或操作的内容
- 自动统计通过/失败数量
- 输出测试总结报告

---

## 🔍 十大典型问题概览

| # | 问题 | 严重度 | 测试脚本 |
|---|------|--------|---------|
| 1 | 非准备状态仍能接收飞镖输入 | 🔴 高 | 6_状态机 |
| 2 | 点击开始后无倒计时启动 | 🔴 高 | 6_状态机 |
| 3 | 轻镖内牛眼得分错误（应为5分） | 🔴 高 | 5_得分逻辑 |
| 4 | 重镖三倍区得分错误（应为2分） | 🔴 高 | 5_得分逻辑 |
| 5 | 超时后仍接收得分信息 | 🔴 高 | 6_状态机 |
| 6 | 非结束状态复位清空数据 | 🟡 中 | 6_状态机 |
| 7 | 校验错误数据帧未被丢弃 | 🔴 高 | 3/8_接口/异常 |
| 8 | 非法区域仍被接收 | 🔴 高 | 4/8_接口/异常 |
| 9 | 成绩评定分区错误（2分应为良） | 🟡 中 | 7_成绩评定 |
| 10 | nil数量导致系统崩溃 | 🔴 高 | 8_异常 |

**详细分析**: 请查看 [问题报告_详细版.md](./问题报告_详细版.md)

---

## 📊 得分规则快速参考

### 飞镖类型与区域得分

| 区域 | 轻镖(type=1) | 重镖(type=2) |
|------|-------------|-------------|
| 内牛眼(1) | **5分** ⭐ | 3分 |
| 外牛眼(2) | 3分 | 2分 |
| 三倍区(3) | 2分 | **2分** ⭐ |
| 普通区(4-20) | 1分 | 1分 |

⭐ 高频问题点

### 成绩评定标准

| 评定 | 条件 |
|------|------|
| 优秀 | 平均分 >= 2.5 |
| 良 | 2.5 > 平均分 >= 2.0 ⭐ |
| 差 | 平均分 < 2.0 |

⭐ 关键：平均2分应为"良"

---

## 🎓 文档结构

```
嵌入式-智能飞镖感应设备-省赛_1763018541545/
│
├── README.md                    ← 📍 你在这里
├── 项目概览.md                  ← 完整项目说明
├── 问题报告_详细版.md            ← 10大问题详细分析
│
├── project/
│   ├── func/                    ← 8个测试脚本
│   │   ├── 1shoot.lua
│   │   ├── 2target.lua
│   │   ├── 3interface_shoot.lua
│   │   ├── 4interface_target.lua
│   │   ├── 5scoring_test.lua      ⭐ 新增
│   │   ├── 6state_machine_test.lua ⭐ 新增
│   │   ├── 7performance_test.lua  ⭐ 新增
│   │   └── 8exception_test.lua    ⭐ 新增
│   │
│   ├── run/                     ← 运行配置文件
│   ├── testdata/                ← 测试数据
│   │   └── data.yml             ← 综合测试数据配置
│   ├── prot/                    ← 协议定义
│   └── 测试说明.md               ← 详细测试说明
│
└── CST2025嵌入式分赛--*.pdf     ← 需求、测试、评分文档
```

---

## 💡 使用建议

### 新手指南
1. 先阅读 [项目概览.md](./项目概览.md) 了解整体结构
2. 查看 [测试说明.md](./project/测试说明.md) 学习测试方法
3. 依次运行8个测试脚本
4. 对照 [问题报告](./问题报告_详细版.md) 验证问题

### 开发者指南
1. 修改 `testdata/data.yml` 添加新的测试数据
2. 参考现有脚本编写新的测试用例
3. 使用问题报告中的修复建议进行开发
4. 完成修复后重新运行测试验证

### 测试工程师指南
1. 按优先级执行测试（P0 → P1 → P2）
2. 详细记录每个失败用例的现象
3. 对比问题报告验证已知问题
4. 发现新问题及时补充到报告中

---

## 🔧 协议格式

### 飞镖信息协议（COM接口1）
```
0xAA55 | 0xBB | type | number | checksum | 0x55AA
包头   | 标志 | 类型 | 数量   | 校验和   | 包尾
```

### 靶区信息协议（COM接口2）
```
0xAA55 | 0xCC | zone | 0x11 | checksum | 0x55AA
包头   | 标志1| 区域 | 标志2| 校验和   | 包尾
```

---

## 📈 测试覆盖率

| 类别 | 覆盖率 |
|------|--------|
| 功能覆盖 | ✅ 100% |
| 接口覆盖 | ✅ 100% |
| 状态覆盖 | ✅ 100% |
| 异常覆盖 | ✅ 100% |
| 问题识别 | ✅ 10/10 |

---

## 🎯 测试目标

### 已完成 ✅
- [x] 基础功能测试（输入/接收）
- [x] 接口校验测试（包头/包尾/校验和）
- [x] 得分逻辑测试（2种飞镖 × 4种区域）
- [x] 状态机测试（4种异常状态）
- [x] 成绩评定测试（3个评级 + 边界值）
- [x] 异常数据测试（8种异常场景）
- [x] 10大问题识别与分析

### 未来扩展 🚀
- [ ] 性能压力测试
- [ ] 并发场景测试
- [ ] 长时间稳定性测试
- [ ] 自动化报告生成

---

## 📞 支持与反馈

### 遇到问题？
1. 查看 [测试说明](./project/测试说明.md) 的故障排查章节
2. 检查测试日志输出
3. 对照 [问题报告](./问题报告_详细版.md) 确认是否为已知问题

### 有改进建议？
欢迎提供关于以下方面的建议：
- 测试用例补充
- 测试脚本优化
- 文档完善
- 新功能需求

---

## 📜 版本信息

**当前版本**: v2.0  
**发布日期**: 2025年  
**主要更新**:
- ✅ 新增4个高级测试脚本
- ✅ 完善测试数据配置
- ✅ 编写完整问题报告
- ✅ 覆盖10大典型问题

---

## 📚 相关资源

- 📄 需求文档: `CST2025嵌入式分赛--省赛--需求文档.pdf`
- 📄 测试要求: `CST2025嵌入式分赛--省赛--测试要求.pdf`
- 📄 评分规则: `CST2025嵌入式分赛--省赛--评分规则.pdf`
- 📊 问题模板: `CST2025嵌入式分赛--问题报告模板.xlsx`

---

## 🏆 项目亮点

1. **全面性** - 覆盖所有功能模块和边界条件
2. **系统性** - 从基础到高级，层层递进
3. **实用性** - 识别真实问题，提供修复方案
4. **易用性** - 文档完善，脚本清晰，配置灵活
5. **可扩展** - 数据驱动，易于添加新测试

---

## 🎓 学习价值

本项目可作为：
- 📚 嵌入式系统测试的完整示例
- 📚 Lua测试脚本编写的参考案例
- 📚 测试驱动开发(TDD)的实践教程
- 📚 问题分析与根因定位的学习材料

---

**开始测试**: 请查看 [项目概览.md](./项目概览.md) 获取详细指导

**问题分析**: 请查看 [问题报告_详细版.md](./问题报告_详细版.md) 了解10大问题

**测试执行**: 请查看 [测试说明.md](./project/测试说明.md) 学习具体操作

---

_本项目提供智能飞镖感应设备的完整测试解决方案，可直接用于系统验证、问题发现和质量评估。_

**许可**: 用于教学和测试目的  
**维护**: 持续更新中
